<!DOCTYPE html>
<!-- saved from url=(0034)http://nodejs.cn/api/readline.html -->
<html lang="zh-cmn-Hans"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>readline | Node.js API 文档</title>
  <link rel="stylesheet" href="res/api.css">
</head>
<body class="alt apidoc" id="api-section-readline">
  <div id="content" class="clearfix">
    <div id="column2" class="interior">
      <div id="intro" class="interior">
        <a href="http://nodejs.cn/">
          Node.js 中文网
        </a>
      </div>
      <ul>
<li><a class="nav-documentation" href="documentation.html">关于本文档</a></li>
<li><a class="nav-synopsis" href="synopsis.html">用法与例子</a></li>
</ul>
<div class="line"></div>

<ul>
<li><a class="nav-assert" href="assert.html">Assert (断言)</a></li>
<li><a class="nav-buffer" href="buffer.html">Buffer</a></li>
<li><a class="nav-addons" href="addons.html">C/C++ 插件</a></li>
<li><a class="nav-child_process" href="child_process.html">Child Processes (子进程)</a></li>
<li><a class="nav-cluster" href="cluster.html">Cluster (集群)</a></li>
<li><a class="nav-cli" href="cli.html">CLI (命令行选项)</a></li>
<li><a class="nav-console" href="console.html">Console (控制台)</a></li>
<li><a class="nav-crypto" href="crypto.html">Crypto (加密)</a></li>
<li><a class="nav-debugger" href="debugger.html">Debugger (调试器)</a></li>
<li><a class="nav-dns" href="dns.html">DNS (域名服务器)</a></li>
<li><a class="nav-domain" href="domain.html">Domain (域)</a></li>
<li><a class="nav-errors" href="errors.html">Error (错误)</a></li>
<li><a class="nav-events" href="events.html">Events (事件)</a></li>
<li><a class="nav-fs" href="fs.html">File System (文件系统)</a></li>
<li><a class="nav-globals" href="globals.html">Global (全局变量)</a></li>
<li><a class="nav-http" href="http.html">HTTP</a></li>
<li><a class="nav-https" href="https.html">HTTPS</a></li>
<li><a class="nav-modules" href="modules.html">Module (模块)</a></li>
<li><a class="nav-net" href="net.html">Net (网络)</a></li>
<li><a class="nav-os" href="os.html">OS (操作系统)</a></li>
<li><a class="nav-path" href="path.html">Path (路径)</a></li>
<li><a class="nav-process" href="process.html">Process (进程)</a></li>
<li><a class="nav-punycode" href="punycode.html">Punycode</a></li>
<li><a class="nav-querystring" href="querystring.html">Query Strings (查询字符串)</a></li>
<li><a class="nav-readline active" href="./readline_files/readline.htm">Readline (逐行读取)</a></li>
<li><a class="nav-repl" href="repl.html">REPL (交互式解释器)</a></li>
<li><a class="nav-stream" href="stream.html">Stream (流)</a></li>
<li><a class="nav-string_decoder" href="string_decoder.html">String Decoder (字符串解码器)</a></li>
<li><a class="nav-timers" href="timers.html">Timer (定时器)</a></li>
<li><a class="nav-tls" href="tls.html">TLS/SSL</a></li>
<li><a class="nav-tty" href="tty.html">TTY (终端)</a></li>
<li><a class="nav-dgram" href="dgram.html">UDP/Datagram (数据报)</a></li>
<li><a class="nav-url" href="url.html">URL</a></li>
<li><a class="nav-util" href="util.html">Util (实用工具)</a></li>
<li><a class="nav-v8" href="v8.html">V8</a></li>
<li><a class="nav-vm" href="vm.html">VM (虚拟机)</a></li>
<li><a class="nav-zlib" href="zlib.html">ZLIB (压缩)</a></li>
</ul>
<div class="line"></div>


    </div>

    <div id="column1" data-id="readline" class="interior">
      <header>
        <h1>Node.js v6.10.2 文档</h1>
        <div id="gtoc">
          <p>
            <a href="" name="toc">返回文档首页</a>
            <!--<a href="/api/all.html">单页面显示</a> |-->
            <!--<a href="/api/readline.json">JSON格式</a> |-->
            <!--<a href="/api/en/readline.html">查看英文版</a>-->
          </p>
        </div>
        <hr>
      </header>

      <div id="toc">
        <h2>目录</h2>
        <ul>
<li><span class="stability_2"><a href="readline.html#readline_readline">readline (逐行读取)</a></span><ul>
<li><span class="stability_undefined"><a href="readline.html#readline_class_interface">Interface 类</a></span><ul>
<li><span class="stability_undefined"><a href="readline.html#readline_event_close">'close' 事件</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_event_line">'line' 事件</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_event_pause">'pause' 事件</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_event_resume">'resume' 事件</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_event_sigcont">'SIGCONT' 事件</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_event_sigint">'SIGINT' 事件</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_event_sigtstp">'SIGTSTP' 事件</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_rl_close">rl.close()</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_rl_pause">rl.pause()</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_rl_prompt_preservecursor">rl.prompt([preserveCursor])</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_rl_question_query_callback">rl.question(query, callback)</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_rl_resume">rl.resume()</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_rl_setprompt_prompt">rl.setPrompt(prompt)</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_rl_write_data_key">rl.write(data[, key])</a></span></li>
</ul>
</li>
<li><span class="stability_undefined"><a href="readline.html#readline_readline_clearline_stream_dir">readline.clearLine(stream, dir)</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_readline_clearscreendown_stream">readline.clearScreenDown(stream)</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_readline_createinterface_options">readline.createInterface(options)</a></span><ul>
<li><span class="stability_undefined"><a href="readline.html#readline_use_of_the_completer_function"><code>completer</code> 函数的使用</a></span></li>
</ul>
</li>
<li><span class="stability_undefined"><a href="readline.html#readline_readline_cursorto_stream_x_y">readline.cursorTo(stream, x, y)</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_readline_emitkeypressevents_stream_interface">readline.emitKeypressEvents(stream[, interface])</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_readline_movecursor_stream_dx_dy">readline.moveCursor(stream, dx, dy)</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_example_tiny_cli">例子：简单的命令行界面</a></span></li>
<li><span class="stability_undefined"><a href="readline.html#readline_example_read_file_stream_line_by_line">例子：逐行地读取文件流</a></span></li>
</ul>
</li>
</ul>

      </div>

      <div id="apicontent">
        <h1>readline (逐行读取)<span><a class="mark" href="readline.html#readline_readline" id="readline_readline">#</a></span></h1><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_readline">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/readline.md">参与翻译</a></p>
<pre class="api_stability api_stability_2 sh_sourceCode">稳定性<span class="sh_symbol">:</span> <span class="sh_number">2</span> <span class="sh_symbol">-</span> 稳定的</pre><p><code>require('readline')</code> 模块提供了一个接口，用于从<a href="stream.html#stream_readable_streams">可读流</a>（如 <a href="process.html#process_process_stdin"><code>process.stdin</code></a>）读取数据，每次读取一行。
它可以通过以下方式使用：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> readline <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'readline'</span><span class="sh_symbol">);</span>
</code></pre>
<p>例子，<code>readline</code> 模块的基本用法：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> readline <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'readline'</span><span class="sh_symbol">);</span>

<span class="sh_keyword">const</span> rl <span class="sh_symbol">=</span> readline<span class="sh_symbol">.</span><span class="sh_function">createInterface</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>
  input<span class="sh_symbol">:</span> process<span class="sh_symbol">.</span>stdin<span class="sh_symbol">,</span>
  output<span class="sh_symbol">:</span> process<span class="sh_symbol">.</span>stdout
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>

rl<span class="sh_symbol">.</span><span class="sh_function">question</span><span class="sh_symbol">(</span><span class="sh_string">'你认为 Node.js 中文网怎么样？'</span><span class="sh_symbol">,</span> <span class="sh_symbol">(</span>answer<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// 对答案进行处理</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`多谢你的反馈：$<span class="sh_cbracket">{</span>answer<span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>

  rl<span class="sh_symbol">.</span><span class="sh_function">close</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>注意，当调用该代码时，Node.js 程序不会终止，直到 <code>readline.Interface</code> 被关闭，因为接口在等待 <code>input</code> 流中要被接收的数据。</p>
<h2>Interface 类<span><a class="mark" href="readline.html#readline_class_interface" id="readline_class_interface">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_class_interface">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/class_interface.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.104</span>
</div><p><code>readline.Interface</code> 类的实例是使用 <code>readline.createInterface()</code> 方法构造的。
每个实例都关联一个 <code>input</code> <a href="stream.html#stream_readable_streams">可读流</a>和一个 <code>output</code> <a href="stream.html#stream_writable_streams">可写流</a>。
<code>output</code> 流用于为到达的用户输入打印提示，且从 <code>input</code> 流读取。</p>
<h3>'close' 事件<span><a class="mark" href="readline.html#readline_event_close" id="readline_event_close">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_event_close">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/event_close.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div><p>当以下之一发生时，触发 <code>'close'</code> 事件：</p>
<ul>
<li><code>rl.close()</code> 方法被调用，且 <code>readline.Interface</code> 实例已撤回对 <code>input</code> 流和 <code>output</code> 流的控制；</li>
<li><code>input</code> 流接收到 <code>'end'</code> 事件；</li>
<li><code>input</code> 流接收到表示结束传输的 <code>&lt;ctrl&gt;-D</code>；</li>
<li><code>input</code> 流接收到表示 <code>SIGINT</code> 的 <code>&lt;ctrl&gt;-C</code>，且 <code>readline.Interface</code> 实例上没有注册 <code>SIGINT</code> 事件监听器。</li>
</ul>
<p>监听器函数被调用时不传入任何参数。</p>
<p>当 <code>'close'</code> 事件被触发时，<code>readline.Interface</code> 实例应当被视为已结束。</p>
<h3>'line' 事件<span><a class="mark" href="readline.html#readline_event_line" id="readline_event_line">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_event_line">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/event_line.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div><p>每当 <code>input</code> 流接收到接收行结束符（<code>\n</code>、<code>\r</code> 或 <code>\r\n</code>）时触发 <code>'line'</code> 事件。
通常发生在用户按下 <code>&lt;Enter&gt;</code> 键或 <code>&lt;Return&gt;</code> 键。</p>
<p>监听器函数被调用时会带上一个包含接收的那一行输入的字符串。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'line'</span><span class="sh_symbol">,</span> <span class="sh_symbol">(</span>input<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`接收到：$<span class="sh_cbracket">{</span>input<span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<h3>'pause' 事件<span><a class="mark" href="readline.html#readline_event_pause" id="readline_event_pause">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_event_pause">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/event_pause.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div><p>当以下之一发生时触发 <code>'pause'</code> 事件：</p>
<ul>
<li><code>input</code> 流被暂停。</li>
<li><code>input</code> 流不是暂停的，且接收到 <code>SIGCONT</code> 事件。（详见 <a href="readline.html#readline_event_sigtstp"><code>SIGTSTP</code></a> 事件和 <a href="readline.html#readline_event_sigcont"><code>SIGCONT</code></a> 事件）</li>
</ul>
<p>监听器函数被调用时不传入任何参数。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'pause'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'Readline 被暂停。'</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<h3>'resume' 事件<span><a class="mark" href="readline.html#readline_event_resume" id="readline_event_resume">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_event_resume">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/event_resume.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div><p>每当 <code>input</code> 流被恢复时触发 <code>'resume'</code> 事件。</p>
<p>监听器函数被调用时不传入任何参数。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'resume'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'Readline 被恢复。'</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<h3>'SIGCONT' 事件<span><a class="mark" href="readline.html#readline_event_sigcont" id="readline_event_sigcont">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_event_sigcont">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/event_sigcont.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div><p>当一个 Node.js 进程使用 <code>&lt;ctrl&gt;-Z</code>（也就是 <code>SIGTSTP</code>）移入后台之后再使用 <a href="http://man7.org/linux/man-pages/man1/fg.1.html">fg(1)</a> 移回前台时，触发 <code>'SIGCONT'</code> 事件。</p>
<p>如果 <code>input</code> 流在 <code>SIGTSTP</code> 请求之前被暂停，则事件不会被触发。</p>
<p>监听器函数被调用时不传入任何参数。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'SIGCONT'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// `prompt` 会自动恢复流</span>
  rl<span class="sh_symbol">.</span><span class="sh_function">prompt</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>注意：Windows 系统不支持 <code>'SIGCONT'</code> 事件。</p>
<h3>'SIGINT' 事件<span><a class="mark" href="readline.html#readline_event_sigint" id="readline_event_sigint">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_event_sigint">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/event_sigint.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.3.0</span>
</div><p>每当 <code>input</code> 流接收到一个 <code>&lt;ctrl&gt;-C</code> 输入（通常被称为 <code>SIGINT</code>）时，触发 <code>'SIGINT'</code> 事件。
当 <code>input</code> 流接收到一个 <code>SIGINT</code> 时，如果没有注册 <code>'SIGINT'</code> 事件监听器，则 <code>'pause'</code> 事件会被触发。</p>
<p>监听器函数被调用时不传入任何参数。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'SIGINT'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  rl<span class="sh_symbol">.</span><span class="sh_function">question</span><span class="sh_symbol">(</span><span class="sh_string">'确定要退出吗？'</span><span class="sh_symbol">,</span> <span class="sh_symbol">(</span>answer<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>answer<span class="sh_symbol">.</span><span class="sh_function">match</span><span class="sh_symbol">(</span><span class="sh_regexp">/^y(es)?$/i</span><span class="sh_symbol">))</span> rl<span class="sh_symbol">.</span><span class="sh_function">pause</span><span class="sh_symbol">();</span>
  <span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<h3>'SIGTSTP' 事件<span><a class="mark" href="readline.html#readline_event_sigtstp" id="readline_event_sigtstp">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_event_sigtstp">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/event_sigtstp.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.5</span>
</div><p>每当 <code>input</code> 流接收到一个 <code>&lt;ctrl&gt;-Z</code> 输入（通常被称为 <code>SIGTSTP</code>）时，触发 <code>'SIGTSTP'</code> 事件。
当 <code>input</code> 流接收到一个 <code>SIGTSTP</code> 时，如果没有注册 <code>'SIGTSTP'</code> 事件监听器，则 Node.js 进程会被发送到后台。</p>
<p>当程序使用 <a href="http://man7.org/linux/man-pages/man1/fg.1.html">fg(1)</a> 恢复时，<code>'pause'</code> 和 <code>SIGCONT</code> 事件会被触发。
这可被用来恢复 <code>input</code> 流。</p>
<p>如果 <code>input</code> 流在进程被发送到后台之前被暂停，则 <code>'pause'</code> 和 <code>SIGCONT</code> 事件不会被触发。</p>
<p>监听器函数被调用时不传入任何参数。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'SIGTSTP'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// 这会重写 SIGTSTP，且防止程序进入后台。</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'捕获 SIGTSTP。'</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>注意：Windows 系统不支持 <code>'SIGTSTP'</code> 事件。</p>
<h3>rl.close()<span><a class="mark" href="readline.html#readline_rl_close" id="readline_rl_close">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_rl_close">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/rl_close.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div><p><code>rl.close()</code> 方法会关闭 <code>readline.Interface</code> 实例，且撤回对 <code>input</code> 和 <code>output</code> 流的控制。
但被调用时，<code>'close'</code> 事件会被触发。</p>
<h3>rl.pause()<span><a class="mark" href="readline.html#readline_rl_pause" id="readline_rl_pause">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_rl_pause">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/rl_pause.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.3.4</span>
</div><p><code>rl.pause()</code> 方法会暂停 <code>input</code> 流，且稍后需要时可被恢复。</p>
<p>调用 <code>rl.pause()</code> 不会立刻暂停其他事件（包括 <code>'line'</code>）被 <code>readline.Interface</code> 实例触发。</p>
<h3>rl.prompt([preserveCursor])<span><a class="mark" href="readline.html#readline_rl_prompt_preservecursor" id="readline_rl_prompt_preservecursor">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_rl_prompt_preservecursor">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/rl_prompt_preservecursor.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div><ul>
<li><code>preserveCursor</code> <span class="type">&lt;boolean&gt;</span> 如果为 <code>true</code>，则阻止光标落点被设为 <code>0</code>。</li>
</ul>
<p><code>rl.prompt()</code> 方法会在 <code>output</code> 流中新的一行写入 <code>readline.Interface</code> 实例配置后的 <code>prompt</code>，用于为用户提供一个可供输入的新的位置。</p>
<p>当被调用时，如果 <code>input</code> 流已被暂停，则 <code>rl.prompt()</code> 会恢复 <code>input</code> 流。</p>
<p>如果 <code>readline.Interface</code> 被创建时 <code>output</code> 被设为 <code>null</code> 或 <code>undefined</code>，则提示不会被写入。</p>
<h3>rl.question(query, callback)<span><a class="mark" href="readline.html#readline_rl_question_query_callback" id="readline_rl_question_query_callback">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_rl_question_query_callback">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/rl_question_query_callback.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.3.3</span>
</div><ul>
<li><code>query</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;String&gt;</a> 一个在提示符之前、要写入 <code>output</code> 的叙述或询问。</li>
<li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> 一个回调函数，它会被调用并带上用户响应 <code>query</code> 的输入。</li>
</ul>
<p><code>rl.question()</code> 方法通过写入到 <code>output</code> 来展示 <code>query</code>，并等待用户提供到 <code>input</code> 的输入，然后调用 <code>callback</code> 函数并传入提供的输入作为第一个参数。</p>
<p>当被调用时，如果 <code>input</code> 流已被暂停，则 <code>rl.question()</code> 会恢复 <code>input</code> 流。</p>
<p>如果 <code>readline.Interface</code> 被创建时 <code>output</code> 被设为 <code>null</code> 或 <code>undefined</code>，则 <code>query</code> 不会被写入。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">question</span><span class="sh_symbol">(</span><span class="sh_string">'你最喜欢的食物是什么？'</span><span class="sh_symbol">,</span> <span class="sh_symbol">(</span>answer<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`你最喜欢的食物是 $<span class="sh_cbracket">{</span>answer<span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>注意：传入的 <code>rl.question()</code> 的 <code>callback</code> 函数不遵循接受一个 <code>Error</code> 对象或 <code>null</code> 作为第一个参数的标准模式。
<code>callback</code> 被调用时只带上提供的答案作为唯一的参数。</p>
<h3>rl.resume()<span><a class="mark" href="readline.html#readline_rl_resume" id="readline_rl_resume">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_rl_resume">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/rl_resume.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.3.4</span>
</div><p>如果 <code>input</code> 流已被暂停，则 <code>rl.resume()</code> 方法会恢复 <code>input</code> 流。</p>
<h3>rl.setPrompt(prompt)<span><a class="mark" href="readline.html#readline_rl_setprompt_prompt" id="readline_rl_setprompt_prompt">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_rl_setprompt_prompt">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/rl_setprompt_prompt.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div><ul>
<li><code>prompt</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;String&gt;</a></li>
</ul>
<p><code>rl.setPrompt()</code> 方法用于设置每当 <code>rl.prompt()</code> 被调用时要被写入到 <code>output</code> 的提示。</p>
<h3>rl.write(data[, key])<span><a class="mark" href="readline.html#readline_rl_write_data_key" id="readline_rl_write_data_key">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_rl_write_data_key">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/rl_write_data_key.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div><ul>
<li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;String&gt;</a></li>
<li><code>key</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a><ul>
<li><code>ctrl</code> <span class="type">&lt;boolean&gt;</span> 如果为 <code>true</code> 则表示 <code>&lt;ctrl&gt;</code> 键。</li>
<li><code>meta</code> <span class="type">&lt;boolean&gt;</span> 如果为 <code>true</code> 则表示 <code>&lt;Meta&gt;</code> 键。</li>
<li><code>shift</code> <span class="type">&lt;boolean&gt;</span> 如果为 <code>true</code> 则表示 <code>&lt;Shift&gt;</code> 键。</li>
<li><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;String&gt;</a> 一个按键的名称。</li>
</ul>
</li>
</ul>
<p><code>rl.write()</code> 方法会把 <code>data</code> 或一个由 <code>key</code> 指定的按键序列写入到 <code>output</code>。
只有当 <code>output</code> 是一个 <a href="tty.html">TTY</a> 文本终端时，<code>key</code> 参数才被支持。</p>
<p>如果指定了 <code>key</code>，则 <code>data</code> 会被忽略。</p>
<p>当被调用时，如果 <code>input</code> 流已被暂停，则 <code>rl.write()</code> 会恢复 <code>input</code> 流。</p>
<p>如果 <code>readline.Interface</code> 被创建时 <code>output</code> 被设为 <code>null</code> 或 <code>undefined</code>，则 <code>data</code> 和 <code>key</code> 不会被写入。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'删除这个！'</span><span class="sh_symbol">);</span>
<span class="sh_comment">// 模拟 Ctrl+u 删除写入的前一行。</span>
rl<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span> <span class="sh_cbracket">{</span>ctrl<span class="sh_symbol">:</span> <span class="sh_keyword">true</span><span class="sh_symbol">,</span> name<span class="sh_symbol">:</span> <span class="sh_string">'u'</span><span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>注意：<code>rl.write()</code> 方法会写入数据到 <code>readline</code> 接口的 <code>input</code>，犹如它是用户提供的。</p>
<h2>readline.clearLine(stream, dir)<span><a class="mark" href="readline.html#readline_readline_clearline_stream_dir" id="readline_readline_clearline_stream_dir">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_readline_clearline_stream_dir">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/readline_clearline_stream_dir.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div><ul>
<li><code>stream</code> <span class="type">&lt;Writable&gt;</span></li>
<li><code>dir</code> <span class="type">&lt;number&gt;</span><ul>
<li><code>-1</code> - 光标左边</li>
<li><code>1</code> - 光标右边</li>
<li><code>0</code> - 整行</li>
</ul>
</li>
</ul>
<p><code>readline.clearLine()</code> 方法会以 <code>dir</code> 指定的方向清除给定的 <a href="tty.html">TTY</a> 流的当前行。</p>
<h2>readline.clearScreenDown(stream)<span><a class="mark" href="readline.html#readline_readline_clearscreendown_stream" id="readline_readline_clearscreendown_stream">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_readline_clearscreendown_stream">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/readline_clearscreendown_stream.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div><ul>
<li><code>stream</code> <span class="type">&lt;Writable&gt;</span></li>
</ul>
<p><code>readline.clearScreenDown()</code> 方法会从光标的当前位置向下清除给定的 <a href="tty.html">TTY</a> 流。</p>
<h2>readline.createInterface(options)<span><a class="mark" href="readline.html#readline_readline_createinterface_options" id="readline_readline_createinterface_options">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_readline_createinterface_options">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/readline_createinterface_options.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.1.98</span>
</div><ul>
<li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a><ul>
<li><code>input</code> <span class="type">&lt;Readable&gt;</span> 要监听的<a href="stream.html#stream_readable_streams">可读流</a>。该选项是必需的。</li>
<li><code>output</code> <span class="type">&lt;Writable&gt;</span> 要写入逐行读取数据的<a href="stream.html#stream_writable_streams">可写流</a>。</li>
<li><code>completer</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" class="type">&lt;Function&gt;</a> 一个可选的函数，用于 Tab 自动补全。</li>
<li><code>terminal</code> <span class="type">&lt;boolean&gt;</span> 如果 <code>input</code> 和 <code>output</code> 应被当作一个 TTY，且要写入 ANSI/VT100 转换的代码，则设为 <code>true</code>。
默认为实例化时在 <code>output</code> 流上检查 <code>isTTY</code>。</li>
<li><code>historySize</code> <span class="type">&lt;number&gt;</span> 保留的历史行数的最大数量。
设为 <code>0</code> 可禁用历史记录。
默认为 <code>30</code>。
该选项只有当 <code>terminal</code> 被用户或内部 <code>output</code> 设为 <code>true</code> 时才有意义，否则历史缓存机制不会被初始化。</li>
<li><code>prompt</code> - 要使用的提示字符串。默认为 <code>'&gt; '</code>。</li>
<li><code>crlfDelay</code> <span class="type">&lt;number&gt;</span> 如果 <code>\r</code> 与 <code>\n</code> 之间的延迟超过 <code>crlfDelay</code> 毫秒，则 <code>\r</code> 和 <code>\n</code> 都会被当作换行分隔符。
默认为 <code>100</code> 毫秒。
<code>crlfDelay</code> 的范围为 <code>[100, 2000]</code>。</li>
</ul>
</li>
</ul>
<p><code>readline.createInterface()</code> 方法会创建一个新的 <code>readline.Interface</code> 实例。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> readline <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'readline'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> rl <span class="sh_symbol">=</span> readline<span class="sh_symbol">.</span><span class="sh_function">createInterface</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>
  input<span class="sh_symbol">:</span> process<span class="sh_symbol">.</span>stdin<span class="sh_symbol">,</span>
  output<span class="sh_symbol">:</span> process<span class="sh_symbol">.</span>stdout
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>一旦 <code>readline.Interface</code> 实例被创建，最常见的用法是监听 <code>'line'</code> 事件：</p>
<pre class="sh_sourceCode"><code class="lang-js">rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'line'</span><span class="sh_symbol">,</span> <span class="sh_symbol">(</span>line<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`接收到：$<span class="sh_cbracket">{</span>line<span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p>如果该实例的 <code>terminal</code> 为 <code>true</code>，则若它定义了一个 <code>output.columns</code> 属性则 <code>output</code> 流会获得最佳兼容性，且如果或当列发生变化时，<code>output</code> 上触发一个 <code>'resize'</code> 事件（当它为一个 TTY 时，<a href="process.html#process_process_stdout"><code>process.stdout</code></a> 会自动处理这个）。</p>
<h3><code>completer</code> 函数的使用<span><a class="mark" href="readline.html#readline_use_of_the_completer_function" id="readline_use_of_the_completer_function">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_use_of_the_completer_function">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/use_of_the_completer_function.md">参与翻译</a></p>
<p>当被调用时，用户输入的当前行会被提供给 <code>completer</code> 函数，并返回一个包含以下两个条目的数组：</p>
<ul>
<li>一个包含匹配补全输入的数组。</li>
<li>用于匹配的子字符串。</li>
</ul>
<p>例如：<code>[[substr1, substr2, ...], originalsubstring]</code>。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">function</span> <span class="sh_function">completer</span><span class="sh_symbol">(</span>line<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  <span class="sh_keyword">const</span> completions <span class="sh_symbol">=</span> <span class="sh_string">'.help .error .exit .quit .q'</span><span class="sh_symbol">.</span><span class="sh_function">split</span><span class="sh_symbol">(</span><span class="sh_string">' '</span><span class="sh_symbol">);</span>
  <span class="sh_keyword">const</span> hits <span class="sh_symbol">=</span> completions<span class="sh_symbol">.</span><span class="sh_function">filter</span><span class="sh_symbol">((</span>c<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span> <span class="sh_keyword">return</span> c<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span>line<span class="sh_symbol">)</span> <span class="sh_symbol">===</span> <span class="sh_number">0</span> <span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
  <span class="sh_comment">// 如果没匹配到则展示全部补全</span>
  <span class="sh_keyword">return</span> <span class="sh_symbol">[</span>hits<span class="sh_symbol">.</span>length <span class="sh_symbol">?</span> hits <span class="sh_symbol">:</span> completions<span class="sh_symbol">,</span> line<span class="sh_symbol">];</span>
<span class="sh_cbracket">}</span>
</code></pre>
<p>如果 <code>completer</code> 函数接受两个参数，则可被异步地调用：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">function</span> <span class="sh_function">completer</span><span class="sh_symbol">(</span>linePartial<span class="sh_symbol">,</span> callback<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  <span class="sh_function">callback</span><span class="sh_symbol">(</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span> <span class="sh_symbol">[[</span><span class="sh_string">'123'</span><span class="sh_symbol">],</span> linePartial<span class="sh_symbol">]);</span>
<span class="sh_cbracket">}</span>
</code></pre>
<h2>readline.cursorTo(stream, x, y)<span><a class="mark" href="readline.html#readline_readline_cursorto_stream_x_y" id="readline_readline_cursorto_stream_x_y">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_readline_cursorto_stream_x_y">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/readline_cursorto_stream_x_y.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div><ul>
<li><code>stream</code> <span class="type">&lt;Writable&gt;</span></li>
<li><code>x</code> <span class="type">&lt;number&gt;</span></li>
<li><code>y</code> <span class="type">&lt;number&gt;</span></li>
</ul>
<p><code>readline.cursorTo()</code> 方法会移动光标到给定的 <a href="tty.html">TTY</a> <code>stream</code> 中指定的位置。</p>
<h2>readline.emitKeypressEvents(stream[, interface])<span><a class="mark" href="readline.html#readline_readline_emitkeypressevents_stream_interface" id="readline_readline_emitkeypressevents_stream_interface">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_readline_emitkeypressevents_stream_interface">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/readline_emitkeypressevents_stream_interface.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div><ul>
<li><code>stream</code> <span class="type">&lt;Readable&gt;</span></li>
<li><code>interface</code> <span class="type">&lt;readline.Interface&gt;</span></li>
</ul>
<p><code>readline.emitKeypressEvents()</code> 方法使给定的<a href="stream.html#stream_writable_streams">可写流</a> <code>stream</code> 相应于接收到的输入触发 <code>'keypress'</code> 事件。</p>
<p>可选的 <code>interface</code> 指定了一个 <code>readline.Interface</code> 实例，用于当自动补全被禁用时检测到复制粘贴输入。</p>
<p>如果 <code>stream</code> 是一个 <a href="tty.html">TTY</a>，则它必须为原始模式。</p>
<pre class="sh_sourceCode"><code class="lang-js">readline<span class="sh_symbol">.</span><span class="sh_function">emitKeypressEvents</span><span class="sh_symbol">(</span>process<span class="sh_symbol">.</span>stdin<span class="sh_symbol">);</span>
<span class="sh_keyword">if</span> <span class="sh_symbol">(</span>process<span class="sh_symbol">.</span>stdin<span class="sh_symbol">.</span>isTTY<span class="sh_symbol">)</span>
  process<span class="sh_symbol">.</span>stdin<span class="sh_symbol">.</span><span class="sh_function">setRawMode</span><span class="sh_symbol">(</span><span class="sh_keyword">true</span><span class="sh_symbol">);</span>
</code></pre>
<h2>readline.moveCursor(stream, dx, dy)<span><a class="mark" href="readline.html#readline_readline_movecursor_stream_dx_dy" id="readline_readline_movecursor_stream_dx_dy">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_readline_movecursor_stream_dx_dy">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/readline_movecursor_stream_dx_dy.md">参与翻译</a></p>
<div class="api_metadata">
<span>新增于: v0.7.7</span>
</div><ul>
<li><code>stream</code> <span class="type">&lt;Writable&gt;</span></li>
<li><code>dx</code> <span class="type">&lt;number&gt;</span></li>
<li><code>dy</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;Number&gt;</a></li>
</ul>
<p><code>readline.moveCursor()</code> 方法会移动光标到给定的 <a href="tty.html">TTY</a> <code>stream</code> 中相对当前的位置。</p>
<h2>例子：简单的命令行界面<span><a class="mark" href="readline.html#readline_example_tiny_cli" id="readline_example_tiny_cli">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_example_tiny_cli">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/example_tiny_cli.md">参与翻译</a></p>
<p>例子，使用 <code>readline.Interface</code> 类实现一个简单的命令行界面：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> readline <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'readline'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> rl <span class="sh_symbol">=</span> readline<span class="sh_symbol">.</span><span class="sh_function">createInterface</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>
  input<span class="sh_symbol">:</span> process<span class="sh_symbol">.</span>stdin<span class="sh_symbol">,</span>
  output<span class="sh_symbol">:</span> process<span class="sh_symbol">.</span>stdout<span class="sh_symbol">,</span>
  prompt<span class="sh_symbol">:</span> <span class="sh_string">'请输入&gt; '</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>

rl<span class="sh_symbol">.</span><span class="sh_function">prompt</span><span class="sh_symbol">();</span>

rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'line'</span><span class="sh_symbol">,</span> <span class="sh_symbol">(</span>line<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_keyword">switch</span><span class="sh_symbol">(</span>line<span class="sh_symbol">.</span><span class="sh_function">trim</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">case</span> <span class="sh_string">'hello'</span><span class="sh_symbol">:</span>
      console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'world!'</span><span class="sh_symbol">);</span>
      <span class="sh_keyword">break</span><span class="sh_symbol">;</span>
    <span class="sh_keyword">default</span><span class="sh_symbol">:</span>
      console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`你输入的是：<span class="sh_string">'${line.trim()}'</span>`<span class="sh_symbol">);</span>
      <span class="sh_keyword">break</span><span class="sh_symbol">;</span>
  <span class="sh_cbracket">}</span>
  rl<span class="sh_symbol">.</span><span class="sh_function">prompt</span><span class="sh_symbol">();</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">).</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'close'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span><span class="sh_string">'再见!'</span><span class="sh_symbol">);</span>
  process<span class="sh_symbol">.</span><span class="sh_function">exit</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<h2>例子：逐行地读取文件流<span><a class="mark" href="readline.html#readline_example_read_file_stream_line_by_line" id="readline_example_read_file_stream_line_by_line">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/readline.html#readline_example_read_file_stream_line_by_line">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/readline/example_read_file_stream_line_by_line.md">参与翻译</a></p>
<p>例子，从一个文件系统<a href="stream.html#stream_readable_streams">可读流</a>中每次一行地消耗输入：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> readline <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'readline'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> fs <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'fs'</span><span class="sh_symbol">);</span>

<span class="sh_keyword">const</span> rl <span class="sh_symbol">=</span> readline<span class="sh_symbol">.</span><span class="sh_function">createInterface</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>
  input<span class="sh_symbol">:</span> fs<span class="sh_symbol">.</span><span class="sh_function">createReadStream</span><span class="sh_symbol">(</span><span class="sh_string">'sample.txt'</span><span class="sh_symbol">)</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>

rl<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'line'</span><span class="sh_symbol">,</span> <span class="sh_symbol">(</span>line<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`文件的单行内容：$<span class="sh_cbracket">{</span>line<span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>

      </div>
    </div>
  </div>
  <script src="res/api.js"></script>
  <script>highlight(undefined, undefined, 'pre');</script>

</body></html>